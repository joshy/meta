{% extends "base.html" %}

{% block search %}
<form id="search-form" action="/search">
  <div class="form-group row">
    <label for="search-input" class="col-sm-2 col-form-label">Search for</label>
    <div class="col-sm-10">
      <div class="input-group">
        <input class="form-control" type="text" placeholder="E.g. CT Schaedel" id="search-input" name="query" value="{{ params.query }}" autofocus>
        <span class="input-group-btn">
          <button class="btn btn-primary" type="submit">Search</button>
        </span>
      </div>
    </div>
    <a class="btn" data-toggle="collapse" data-target="#search-details" href="#">Show more inputs</a>
    <a class="btn" data-toggle="collapse" data-target="#help-details" href="#">Show me some examples</a>
  </div>
  <div id="help-details" class="offset-xs-2 collapse">
    <p>The general search allows you to define your search. </p>
    <p>To search in a specific field use <em>fieldname:value</em></p>
    <p>You can combine multiple search parameters with the boolean operators <em>AND</em> and <em>OR</em>. Those needs to be capitalized.</p>
    <p>An example could be <a href='search?query=*&StudyDescription=%22CT+Schaedel%22&SeriesDescription=%22Sch%C3%A4del+axial+Weichteil%22'>
      StudyDescription:"CT Schaedel" AND SeriesDescription:"Schädel axial Weichteil"
      </a>
    </p>
  </div>
  <div id="search-details" class="collapse">

    <div class="form-group row">
      <label for="studydescription-input" class="col-sm-2 col-form-label">Study Description</label>
      <div class="col-sm-4">
        <input class="form-control" type="text" placeholder="e.g. CT Schaedel" id="studydescription-input" name="StudyDescription" value="{{ params.StudyDescription }}">
      </div>
      <label for="seriesdescription-input" class="col-sm-2 col-form-label">Series Description</label>
      <div class="col-sm-4">
        <input class="form-control" type="text" placeholder="e.g. Schädel axial Weichteil" id="seriesdescription-input" name="SeriesDescription" value="{{ params.SeriesDescription }}">
      </div>
    </div>
    <div class="form-group row">
      <label for="patientname-input" class="col-sm-2 col-form-label">Patient Name</label>
      <div class="col-sm-4">
        <input class="form-control" type="text" id="patientname-input" name="PatientName" value="{{ params.PatientName }}">
      </div>
      <label for="patientid-input" class="col-sm-2 col-form-label">Patient Id</label>
      <div class="col-sm-4">
        <input class="form-control" type="text" id="patientid-input" name="PatientID" value="{{ params.PatientID }}">
      </div>
    </div>
    <div class="form-group row">
      <label for="accessionnumber-input" class="col-sm-2 col-form-label">Accession Number</label>
      <div class="col-sm-4">
        <input class="form-control" type="text" id="accessionnumber-input" name="AccessionNumber" value="{{ params.AccessionNumber }}">
      </div>
    </div>

    <div class="form-group row ">
      <label for="seriesdescription-input" class="col-sm-2 col-form-label">Modality</label>
      <div class="col-sm-5">
        <label class="form-check-inline">
        <input class="form-check-input" type="checkbox" id="modality1" name="Modality" value="CT" {% if 'CT' in modalities %} checked {% endif %}> CT</label>
        <label class="form-check-inline">
        <input class="form-check-input" type="checkbox" id="modality2" name="Modality" value="MR" {% if 'MR' in modalities %} checked {% endif %}> MR</label>
        <label class="form-check-inline">
        <input class="form-check-input" type="checkbox" id="modality11" name="Modality" value="PT" {% if 'PT' in modalities %} checked {% endif %}> PT</label>
        <label class="form-check-inline">
        <input class="form-check-input" type="checkbox" id="modality3" name="Modality" value="CR" {% if 'CR' in modalities %} checked {% endif %}> CR</label>
        <a class="btn" data-toggle="collapse" data-target="#modality-details" href="#">Show all modalities</a>
        <div id="modality-details" class="collapse">
          <label class="form-check-inline">
          <input class="form-check-input" type="checkbox" id="modality4" name="Modality" value="XA" {% if 'XA' in modalities %} checked {% endif %}> XA</label>
          <label class="form-check-inline">
          <input class="form-check-input" type="checkbox" id="modality5" name="Modality" value="SR" {% if 'SR' in modalities %} checked {% endif %}> SR</label>
          <label class="form-check-inline">
          <input class="form-check-input" type="checkbox" id="modality6" name="Modality" value="NM" {% if 'NM' in modalities %} checked {% endif %}> NM</label>
          <label class="form-check-inline">
          <input class="form-check-input" type="checkbox" id="modality7" name="Modality" value="MG" {% if 'MG' in modalities %} checked {% endif %}> MG</label>
          <label class="form-check-inline">
          <input class="form-check-input" type="checkbox" id="modality8" name="Modality" value="US" {% if 'US' in modalities %} checked {% endif %}> US</label>
          <label class="form-check-inline">
          <input class="form-check-input" type="checkbox" id="modality9" name="Modality" value="DX" {% if 'DX' in modalities %} checked {% endif %}> DX</label>
          <label class="form-check-inline">
          <input class="form-check-input" type="checkbox" id="modality10" name="Modality" value="RF" {% if 'RF' in modalities %} checked {% endif %}> RF</label>
          <label class="form-check-inline">
          <input class="form-check-input" type="checkbox" id="modality12" name="Modality" value="OT" {% if 'OT' in modalities %} checked {% endif %}> OT</label>
          <label class="form-check-inline">
          <input class="form-check-input" type="checkbox" id="modality13" name="Modality" value="PR" {% if 'PR' in modalities %} checked {% endif %}> PR</label>
          <label class="form-check-inline">
          <input class="form-check-input" type="checkbox" id="modality14" name="Modality" value="KO" {% if 'KO' in modalities %} checked {% endif %}> KO</label>
          <label class="form-check-inline">
          <input class="form-check-input" type="checkbox" id="modality15" name="Modality" value="SC" {% if 'SC' in modalities %} checked {% endif %}> SC</label>
          <label class="form-check-inline">
          <input class="form-check-input" type="checkbox" id="modality16" name="Modality" value="SD" {% if 'SD' in modalities %} checked {% endif %}> SD</label>
          <label class="form-check-inline">
          <input class="form-check-input" type="checkbox" id="modality17" name="Modality" value="PX" {% if 'PX' in modalities %} checked {% endif %}> PX</label>
          <label class="form-check-inline">
          <input class="form-check-input" type="checkbox" id="modality18" name="Modality" value="GEMS PET RAW" {% if 'GEMS PET RAW' in modalities %} checked {% endif %}> GEMS PET RAW</label>
          <label class="form-check-inline">
          <input class="form-check-input" type="checkbox" id="modality19" name="Modality" value="xa" {% if 'xa' in modalities %} checked {% endif %}> xa</label>
          <label class="form-check-inline">
          <input class="form-check-input" type="checkbox" id="modality20" name="Modality" value="DR" {% if 'DR' in modalities %} checked {% endif %}> DR</label>
          <label class="form-check-inline">
          <input class="form-check-input" type="checkbox" id="modality21" name="Modality" value="CR/DX" {% if 'CR/DX' in modalities %} checked {% endif %}> CR/DX</label>
        </div>
      </div>
    </div>
    <div class="form-group row">
      <label for="start-date-picker" class="col-sm-2 col-form-label">Start Date</label>
      <div class="col-sm-2">
        <input class="form-control" type="text" id="start-date-picker" name="StartDate" value="{{ params.StartDate }}">
      </div>
     </div>
    <div class="form-group row">
      <label for="end-date-picker" class="col-sm-2 col-form-label">End Date</label>
      <div class="col-sm-2">
        <input class="form-control" type="text" id="end-date-picker" name="EndDate" value="{{ params.EndDate}}">
      </div>
    </div>
    <div class="form-group row">
      <div class="offset-sm-2 col-sm-2 text-xs-left">
        <button type="submit" class="btn btn-primary">Search</button>
      </div>
    </div>
  </div>

  <div class="alert alert-danger small {% if not error %} hidden-xs-up {% endif %}" role="alert">
    <p><strong>Error:</strong> {{error}}</p>
    <small>{{trace}}</small>
  </div>
</form>
{% endblock %}